
[core]
@global missileRange: 400
@memory missileSalvo: number
copyFrom:emptySlot.ini
name: isMissilesAttachment
displayText: Missiles

displayDescription: -Active module \n -Turret \n -Effective against everything
displayDescription_ru: -Боевой модуль \n -Залповая установка\n -Эффективна против всего

energyMax: 60
energyRegen: 0.01
energyNeedsToRechargeToFull: true



[hiddenAction_slowdownMassage]
sendMessageWithData: amount=0.06

[hiddenAction_slowdownSellMassage]
sendMessageWithData: amount=-0.06

[action_sell]
ai_isDisabled:true
text: [Sell]
text_ru: [Продать]
pos: 2
isActive: if self.queueSize(empty=true) 
buildSpeed: 3.5s
convertTo: isEmptySlot
addResources: unsetFlag=1

[graphics]
total_frames: 1
teamColorsOnTurret:true

image: SHARED:blank.png
image_wreak: NONE
image_turret: NONE 

imageScale: 0.9
turretImageScale: 0.9

image_shadow: AUTO
shadowOffsetX:0
shadowOffsetY:0

showEnergyBar: false

[decal_turretReich]
image: missilesReich.png
basePositionFromTurret: 1
isVisible:if self.globalTeamTags(includes='Reich')

[decal_turretUSSR]
isVisible:if self.globalTeamTags(includes='USSR')
image: missilesUSSR.png
basePositionFromTurret: 1



[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false
turretSize: 8
turretTurnSpeed: 1.0
maxAttackRange: 200
shootDelay: 1.7s
isFixedFiring:false

aimOffsetSpread: 1.1

[action_Rockets]

displayType: action
text: Rocket Fire
price: energy=60
description: -Rocket strike \n -Hits units in the area
description_ru: -Ракетный удар \n -Поражает юнитов в области
buildSpeed: 1s
pos: 3.0
onlyOneUnitAtATime: true
whenBuilding_cannotMove:false
fireTurretXAtGround: 1
fireTurretXAtGround_count:0
alsoQueueAction:missile
setUnitMemory: """
missileSalvo = 8
"""
playSoundGlobally:ROOT:/data/sfx/weapons/missileAlert.ogg

[hiddenAction_missile]
alsoQueueAction:missile
requireConditional: if memory.missileSalvo >= 1
buildSpeed: 0.3s
highPriorityQueue: true
fireTurretXAtGround: 1
setUnitMemory: missileSalvo = memory.missileSalvo - 1 

[turret_1]
invisible: true
x: 0
y: -2
idleDir: 120

turnSpeed: 0.8
turnSpeedAcceleration: 1.0

shouldResetTurret: false

idleSweepAddRandomAngle: 360
idleSweepAngle: 25
idleSweepDelay:400
idleSweepSpeed: 0.5

canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

shoot_flame:CUSTOM:largeSmoke
shoot_light:#2effe51b
shoot_sound:NONE

projectile: start2
size: 0
canShoot: false

limitingRange: ${missileRange}
limitingMinRange: 100
warmup: 3s

[projectile_start]
@copyFromSection: projectile_microMissile
areaDamage: 0
areaRadius: 0
life: 0
speed: 1
turnSpeed: 0
spawnProjectilesOnEndOfLife: microMissile(offsetDir=180)
explodeEffect:NONE

[projectile_start2]
@copyFromSection: projectile_microMissile
areaDamage: 0
areaRadius: 0
life: 0
speed: 0.1
turnSpeed: 0
spawnProjectilesOnEndOfLife: microMissile(offsetDir=-90)
explodeEffect:NONE

[projectile_microMissile]
#missile
nukeWeapon:true
alwaysVisibleInFog:true
areaDamage: 100
areaRadius: 80
life: 240
speed: 5
tags:Huge
targetSpeed: 3
targetSpeedAcceleration: 1

friendlyFire:true
targetGround:true
targetGroundSpread: 24

retargetingInFlight: true
retargetingInFlightSearchDelay: 10
retargetingInFlightSearchRange: 20
retargetingInFlightSearchLead: 20

image: ROOT:data\projectile\projectile3.png

drawSize: 0.7
trailEffect: true
trailEffectRate: 4
largeHitEffect: false

lightSize: 0.4
lightColor:#ffff8e00
shieldDamageMultiplier: 5

deflectionPower: 10
explodeOnEndOfLife:true
autoTargetingOnDeadTarget:false
hitSound: true
turnSpeed: 1.7
wobbleAmplitude: 1.5
wobbleFrequency: 2.0s
explodeEffect:CUSTOM:Explode2,CUSTOM:scorchmark

mutator2_ifUnitWithTags: Vehicles
mutator2_areaDamageMultiplier: 2

spawnProjectilesOnExplode: daze*2(spawnChance=0.3)

[projectile_daze]
life: 1
speed: 0.2

frame: 1
drawSize: 0.1

targetGround: true
areaDamage: 0
areaRadius: 20


explodeOnEndOfLife: true
friendlyFire: true

explodeEffect:NONE
mutatorDaze_ifUnitWithTags: Infantry
mutatorDaze_addResourcesAreaHit: daze=1



[movement]
movementType: HOVER
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0
maxTurnSpeed: 0
turnAcceleration: 0
moveSlidingMode:false
moveIgnoringBody:false
